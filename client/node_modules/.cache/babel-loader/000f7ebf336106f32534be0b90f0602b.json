{"ast":null,"code":"import _objectSpread from\"C:/Users/user/mern-portfolio-udemy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Modal,Form,message}from\"antd\";import{HideLoading,ReloadData,ShowLoading}from\"../../redux/rootSlice\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Experiences(){const dispatch=useDispatch();const{portfolioData}=useSelector(state=>state.root);const{experiences}=portfolioData;const[showAddEditModal,setShowAddEditModal]=React.useState(false);const[selectedItemForEdit,setSelectedItemForEdit]=React.useState(null);const[type,setType]=React.useState(\"add\");const onFinish=async values=>{try{dispatch(ShowLoading());let response;if(selectedItemForEdit){response=await axios.post(\"/api/portfolio/update-experience\",_objectSpread(_objectSpread({},values),{},{_id:selectedItemForEdit._id}));}else{response=await axios.post(\"/api/portfolio/add-experience\",values);}dispatch(HideLoading());if(response.data.success){message.success(response.data.message);setShowAddEditModal(false);setSelectedItemForEdit(null);dispatch(HideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(HideLoading());message.error(error.message);}};const onDelete=async item=>{try{dispatch(ShowLoading());const response=await axios.post(\"/api/portfolio/delete-experience\",{_id:item._id});dispatch(HideLoading());if(response.data.success){message.success(response.data.message);dispatch(HideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(HideLoading());message.error(error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary px-5 py-2 text-white\",onClick:()=>{setSelectedItemForEdit(null);setShowAddEditModal(true);},children:\"Add Experience\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-5 mt-5 sm:grid-cols-1\",children:experiences.map(experience=>/*#__PURE__*/_jsxs(\"div\",{className:\"shadow border p-5 border-gray-400 flex flex-col\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-primary text-xl font-bold\",children:experience.period}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Company : \",experience.company]}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Role : \",experience.title]}),/*#__PURE__*/_jsx(\"h1\",{children:experience.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-5 mt-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-5 py-2 \",onClick:()=>{onDelete(experience);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary text-white px-5 py-2\",onClick:()=>{setSelectedItemForEdit(experience);setShowAddEditModal(true);setType(\"edit\");},children:\"Edit\"})]})]}))}),(type===\"add\"||selectedItemForEdit)&&/*#__PURE__*/_jsx(Modal,{visible:showAddEditModal,title:selectedItemForEdit?\"Edit Experience\":\"Add Experience\",footer:null,onCancel:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",onFinish:onFinish,initialValues:selectedItemForEdit||{},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"period\",label:\"Period\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Period\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"company\",label:\"Company\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Company\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"title\",label:\"Title\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"Description\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Description\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"border-primary text-primary px-5 py-2\",onClick:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary text-white px-5 py-2\",children:selectedItemForEdit?\"Update\":\"Add\"})]})]})})]});}export default Experiences;","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","Modal","Form","message","HideLoading","ReloadData","ShowLoading","axios","Experiences","dispatch","portfolioData","state","root","experiences","showAddEditModal","setShowAddEditModal","useState","selectedItemForEdit","setSelectedItemForEdit","type","setType","onFinish","values","response","post","_id","data","success","error","onDelete","item","map","experience","period","company","title","description"],"sources":["C:/Users/user/mern-portfolio-udemy/client/src/pages/Admin/AdminExperiences.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Modal, Form, message } from \"antd\";\r\nimport { HideLoading, ReloadData, ShowLoading } from \"../../redux/rootSlice\";\r\nimport axios from \"axios\";\r\n\r\nfunction Experiences() {\r\n  const dispatch = useDispatch();\r\n  const { portfolioData } = useSelector((state) => state.root);\r\n  const { experiences } = portfolioData;\r\n  const [showAddEditModal, setShowAddEditModal] = React.useState(false);\r\n  const [selectedItemForEdit, setSelectedItemForEdit] = React.useState(null);\r\n  const [type, setType] = React.useState(\"add\");\r\n\r\n  const onFinish = async (values) => {\r\n    try {\r\n      dispatch(ShowLoading());\r\n      let response;\r\n      if (selectedItemForEdit) {\r\n        response = await axios.post(\"/api/portfolio/update-experience\", {\r\n          ...values,\r\n          _id: selectedItemForEdit._id,\r\n        });\r\n      } else {\r\n        response = await axios.post(\"/api/portfolio/add-experience\", values);\r\n      }\r\n\r\n      dispatch(HideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        setShowAddEditModal(false);\r\n        setSelectedItemForEdit(null);\r\n        dispatch(HideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(HideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  const onDelete = async (item) => {\r\n    try {\r\n      dispatch(ShowLoading());\r\n      const response = await axios.post(\"/api/portfolio/delete-experience\", {\r\n        _id: item._id,\r\n      });\r\n      dispatch(HideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        dispatch(HideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(HideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-end\">\r\n        <button\r\n          className=\"bg-primary px-5 py-2 text-white\"\r\n          onClick={() => {\r\n            setSelectedItemForEdit(null);\r\n            setShowAddEditModal(true);\r\n          }}\r\n        >\r\n          Add Experience\r\n        </button>\r\n      </div>\r\n      <div className=\"grid grid-cols-4 gap-5 mt-5 sm:grid-cols-1\">\r\n        {experiences.map((experience) => (\r\n          <div className=\"shadow border p-5 border-gray-400 flex flex-col\">\r\n            <h1 className=\"text-primary text-xl font-bold\">\r\n              {experience.period}\r\n            </h1>\r\n            <hr />\r\n            <h1>Company : {experience.company}</h1>\r\n            <h1>Role : {experience.title}</h1>\r\n            <h1>{experience.description}</h1>\r\n            <div className=\"flex justify-end gap-5 mt-5\">\r\n              <button\r\n                className=\"bg-red-500 text-white px-5 py-2 \"\r\n                onClick={() => {\r\n                  onDelete(experience);\r\n                }}\r\n              >\r\n                Delete\r\n              </button>\r\n              <button\r\n                className=\"bg-primary text-white px-5 py-2\"\r\n                onClick={() => {\r\n                  setSelectedItemForEdit(experience);\r\n                  setShowAddEditModal(true);\r\n                  setType(\"edit\");\r\n                }}\r\n              >\r\n                Edit\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {(type === \"add\" || selectedItemForEdit) && (\r\n        <Modal\r\n          visible={showAddEditModal}\r\n          title={selectedItemForEdit ? \"Edit Experience\" : \"Add Experience\"}\r\n          footer={null}\r\n          onCancel={() => {\r\n            setShowAddEditModal(false);\r\n            setSelectedItemForEdit(null);\r\n          }}\r\n        >\r\n          <Form\r\n            layout=\"vertical\"\r\n            onFinish={onFinish}\r\n            initialValues={selectedItemForEdit || {}}\r\n          >\r\n            <Form.Item name=\"period\" label=\"Period\">\r\n              <input placeholder=\"Period\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"company\" label=\"Company\">\r\n              <input placeholder=\"Company\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"title\" label=\"Title\">\r\n              <input placeholder=\"Title\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"description\" label=\"Description\">\r\n              <input placeholder=\"Description\" />\r\n            </Form.Item>\r\n\r\n            <div className=\"flex justify-end\">\r\n              <button\r\n                className=\"border-primary text-primary px-5 py-2\"\r\n                onClick={() => {\r\n                  setShowAddEditModal(false);\r\n                  setSelectedItemForEdit(null);\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button className=\"bg-primary text-white px-5 py-2\">\r\n                {selectedItemForEdit ? \"Update\" : \"Add\"}\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Experiences;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}