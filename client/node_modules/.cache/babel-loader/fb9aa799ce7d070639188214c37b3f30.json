{"ast":null,"code":"import _objectSpread from\"C:/Users/user/mern-portfolio-udemy/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Modal,Form,message}from\"antd\";import{HideLoading,ReloadData,ShowLoading}from\"../../redux/rootSlice\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AdminProjects(){var _selectedItemForEdit$;const dispatch=useDispatch();const{portfolioData}=useSelector(state=>state.root);const{projects}=portfolioData;const[showAddEditModal,setShowAddEditModal]=React.useState(false);const[selectedItemForEdit,setSelectedItemForEdit]=React.useState(null);const[type,setType]=React.useState(\"add\");const onFinish=async values=>{try{var _values$technologies;const tempTechnologies=(values===null||values===void 0?void 0:(_values$technologies=values.technologies)===null||_values$technologies===void 0?void 0:_values$technologies.split(\",\"))||[];values.technologies=tempTechnologies;dispatch(ShowLoading());let response;if(selectedItemForEdit){response=await axios.post(\"/api/portfolio/update-project\",_objectSpread(_objectSpread({},values),{},{_id:selectedItemForEdit._id}));}else{response=await axios.post(\"/api/portfolio/add-project\",values);}dispatch(HideLoading());if(response.data.success){message.success(response.data.message);setShowAddEditModal(false);setSelectedItemForEdit(null);dispatch(HideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(HideLoading());message.error(error.message);}};const onDelete=async item=>{try{dispatch(ShowLoading());const response=await axios.post(\"/api/portfolio/delete-project\",{_id:item._id});dispatch(HideLoading());if(response.data.success){message.success(response.data.message);dispatch(HideLoading());dispatch(ReloadData(true));}else{message.error(response.data.message);}}catch(error){dispatch(HideLoading());message.error(error.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary px-5 py-2 text-white\",onClick:()=>{setSelectedItemForEdit(null);setShowAddEditModal(true);},children:\"Add Project\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-3 gap-5 mt-5 sm:grid-cols-1\",children:projects.map(project=>/*#__PURE__*/_jsxs(\"div\",{className:\"shadow border p-5 border-gray-400 flex flex-col gap-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-primary text-xl font-bold\",children:project.title}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"img\",{src:project.image,alt:\"\",className:\"h-60 w-80\"}),/*#__PURE__*/_jsxs(\"h1\",{children:[\"Role : \",project.title]}),/*#__PURE__*/_jsx(\"h1\",{children:project.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-5 mt-5\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-red-500 text-white px-5 py-2 \",onClick:()=>{onDelete(project);},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary text-white px-5 py-2\",onClick:()=>{setSelectedItemForEdit(project);setShowAddEditModal(true);setType(\"edit\");},children:\"Edit\"})]})]}))}),(type===\"add\"||selectedItemForEdit)&&/*#__PURE__*/_jsx(Modal,{visible:showAddEditModal,title:selectedItemForEdit?\"Edit Project\":\"Add Project\",footer:null,onCancel:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},children:/*#__PURE__*/_jsxs(Form,{layout:\"vertical\",onFinish:onFinish,initialValues:_objectSpread(_objectSpread({},selectedItemForEdit),{},{technologies:selectedItemForEdit===null||selectedItemForEdit===void 0?void 0:(_selectedItemForEdit$=selectedItemForEdit.technologies)===null||_selectedItemForEdit$===void 0?void 0:_selectedItemForEdit$.join(\" , \")})||{},children:[/*#__PURE__*/_jsx(Form.Item,{name:\"title\",label:\"Title\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"image\",label:\"Image URL\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Image\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"description\",label:\"Description\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"link\",label:\"Link\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Link\"})}),/*#__PURE__*/_jsx(Form.Item,{name:\"technologies\",label:\"Technologies\",children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"Technologies\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"border-primary text-primary px-5 py-2\",onClick:()=>{setShowAddEditModal(false);setSelectedItemForEdit(null);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"bg-primary text-white px-5 py-2\",children:selectedItemForEdit?\"Update\":\"Add\"})]})]})})]});}export default AdminProjects;","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","Modal","Form","message","HideLoading","ReloadData","ShowLoading","axios","AdminProjects","dispatch","portfolioData","state","root","projects","showAddEditModal","setShowAddEditModal","useState","selectedItemForEdit","setSelectedItemForEdit","type","setType","onFinish","values","tempTechnologies","technologies","split","response","post","_id","data","success","error","onDelete","item","map","project","title","image","description","join"],"sources":["C:/Users/user/mern-portfolio-udemy/client/src/pages/Admin/AdminProjects.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Modal, Form, message } from \"antd\";\r\nimport { HideLoading, ReloadData, ShowLoading } from \"../../redux/rootSlice\";\r\nimport axios from \"axios\";\r\n\r\nfunction AdminProjects() {\r\n  const dispatch = useDispatch();\r\n  const { portfolioData } = useSelector((state) => state.root);\r\n  const { projects } = portfolioData;\r\n  const [showAddEditModal, setShowAddEditModal] = React.useState(false);\r\n  const [selectedItemForEdit, setSelectedItemForEdit] = React.useState(null);\r\n  const [type, setType] = React.useState(\"add\");\r\n\r\n  const onFinish = async (values) => {\r\n    try {\r\n      const tempTechnologies = values?.technologies?.split(\",\") || [];\r\n      values.technologies = tempTechnologies;\r\n      dispatch(ShowLoading());\r\n      let response;\r\n      if (selectedItemForEdit) {\r\n        response = await axios.post(\"/api/portfolio/update-project\", {\r\n          ...values,\r\n          _id: selectedItemForEdit._id,\r\n        });\r\n      } else {\r\n        response = await axios.post(\"/api/portfolio/add-project\", values);\r\n      }\r\n\r\n      dispatch(HideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        setShowAddEditModal(false);\r\n        setSelectedItemForEdit(null);\r\n        dispatch(HideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(HideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  const onDelete = async (item) => {\r\n    try {\r\n      dispatch(ShowLoading());\r\n      const response = await axios.post(\"/api/portfolio/delete-project\", {\r\n        _id: item._id,\r\n      });\r\n      dispatch(HideLoading());\r\n      if (response.data.success) {\r\n        message.success(response.data.message);\r\n        dispatch(HideLoading());\r\n        dispatch(ReloadData(true));\r\n      } else {\r\n        message.error(response.data.message);\r\n      }\r\n    } catch (error) {\r\n      dispatch(HideLoading());\r\n      message.error(error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-end\">\r\n        <button\r\n          className=\"bg-primary px-5 py-2 text-white\"\r\n          onClick={() => {\r\n            setSelectedItemForEdit(null);\r\n            setShowAddEditModal(true);\r\n          }}\r\n        >\r\n          Add Project\r\n        </button>\r\n      </div>\r\n      <div className=\"grid grid-cols-3 gap-5 mt-5 sm:grid-cols-1\">\r\n        {projects.map((project) => (\r\n          <div className=\"shadow border p-5 border-gray-400 flex flex-col gap-5\">\r\n            <h1 className=\"text-primary text-xl font-bold\">{project.title}</h1>\r\n            <hr />\r\n            <img src={project.image} alt=\"\" className=\"h-60 w-80\" />\r\n            <h1>Role : {project.title}</h1>\r\n            <h1>{project.description}</h1>\r\n            <div className=\"flex justify-end gap-5 mt-5\">\r\n              <button\r\n                className=\"bg-red-500 text-white px-5 py-2 \"\r\n                onClick={() => {\r\n                  onDelete(project);\r\n                }}\r\n              >\r\n                Delete\r\n              </button>\r\n              <button\r\n                className=\"bg-primary text-white px-5 py-2\"\r\n                onClick={() => {\r\n                  setSelectedItemForEdit(project);\r\n                  setShowAddEditModal(true);\r\n                  setType(\"edit\");\r\n                }}\r\n              >\r\n                Edit\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {(type === \"add\" || selectedItemForEdit) && (\r\n        <Modal\r\n          visible={showAddEditModal}\r\n          title={selectedItemForEdit ? \"Edit Project\" : \"Add Project\"}\r\n          footer={null}\r\n          onCancel={() => {\r\n            setShowAddEditModal(false);\r\n            setSelectedItemForEdit(null);\r\n          }}\r\n        >\r\n          <Form\r\n            layout=\"vertical\"\r\n            onFinish={onFinish}\r\n            initialValues={\r\n              {\r\n                ...selectedItemForEdit,\r\n                technologies: selectedItemForEdit?.technologies?.join(\" , \"),\r\n              } || {}\r\n            }\r\n          >\r\n            <Form.Item name=\"title\" label=\"Title\">\r\n              <input placeholder=\"Title\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"image\" label=\"Image URL\">\r\n              <input placeholder=\"Image\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"description\" label=\"Description\">\r\n              <textarea placeholder=\"Description\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"link\" label=\"Link\">\r\n              <input placeholder=\"Link\" />\r\n            </Form.Item>\r\n            <Form.Item name=\"technologies\" label=\"Technologies\">\r\n              <input placeholder=\"Technologies\" />\r\n            </Form.Item>\r\n\r\n            <div className=\"flex justify-end\">\r\n              <button\r\n                className=\"border-primary text-primary px-5 py-2\"\r\n                onClick={() => {\r\n                  setShowAddEditModal(false);\r\n                  setSelectedItemForEdit(null);\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button className=\"bg-primary text-white px-5 py-2\">\r\n                {selectedItemForEdit ? \"Update\" : \"Add\"}\r\n              </button>\r\n            </div>\r\n          </Form>\r\n        </Modal>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminProjects;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}